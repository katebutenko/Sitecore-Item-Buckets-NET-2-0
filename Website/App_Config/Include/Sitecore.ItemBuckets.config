<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>
    <search>
      <configuration>
        <indexes>
          <index id="itembuckets_buckets" type="Sitecore.Search.Index, Sitecore.Kernel">
            <param desc="name">$(id)</param>
            <param desc="folder">itembuckets_buckets</param>
            <Analyzer ref="search/analyzer" />
            <locations hint="list:AddCrawler">
              <ItemBucketSearch type="Sitecore.ItemBucket.Kernel.Crawlers.CustomCrawler,Sitecore.ItemBucket.Kernel">
                <Database>master</Database>
                <Root>/sitecore/content</Root>
                <IndexAllFields>true</IndexAllFields>
                <fieldTypes hint="raw:AddFieldTypes">
                  <fieldType name="multilist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelistex" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="checklist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="tree list" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="rich text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="checkbox" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="file" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="single-Line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="word document" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="multi-line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droplist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="grouped droplink" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="grouped droplist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droplink" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droptree" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="general link" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                </fieldTypes>
                <include hint="list:ExcludeTemplate">
                  <layout>{ADB6CA4F-03EF-4F47-B9AC-9CE2BA53FF97}</layout>
                </include>
                <!-- <include hint="list:IncludeTemplate">
                  <layout>{ADB6CA4F-03EF-4F47-B9AC-9CE2BA53FF97}</layout>
                </include>
                <include hint="list:IncludeField">
                  <fieldId>{8CDC337E-A112-42FB-BBB4-4143751E123F}</fieldId>
                </include>-->
                <include hint="list:ExcludeField">
                  <__DefaultWorkflow>{CA9B9F52-4FB0-4F87-A79F-24DEA62CDA65}</__DefaultWorkflow>
                  <__Lock>{001DD393-96C5-490B-924A-B0F25CD9EFD8}</__Lock>
                  <__WorkflowState>{3E431DE1-525E-47A3-B6B0-1CCBEC3A8C98}</__WorkflowState>
                  <__LongDescription>{577F1689-7DE4-4AD2-A15F-7FDC1759285F}</__LongDescription>
                  <__Originator>{F6D8A61C-2F84-4401-BD24-52D2068172BC}</__Originator>
                  <__Owner>{52807595-0F8F-4B20-8D2A-CB71D28C6103}</__Owner>
                  <__ReadOnly>{9C6106EA-7A5A-48E2-8CAD-F0F693B1E2D4}</__ReadOnly>
                  <__Renderings>{F1A1FE9E-A60C-4DDB-A3A0-BB5B29FE732E}</__Renderings>
                  <__Revision>{8CDC337E-A112-42FB-BBB4-4143751E123F}</__Revision>
                  <__Security>{DEC8D2D5-E3CF-48B6-A653-8E69E2716641}</__Security>
                  <__ShortDescription>{9541E67D-CE8C-4225-803D-33F7F29F09EF}</__ShortDescription>
                  <__SortOrder>{BA3F86A2-4A1C-4D78-B63D-91C2779C1B5E}</__SortOrder>
                  <__UpdatedBy>{BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}</__UpdatedBy>
                  <__ValidFrom>{C8F93AFE-BFD4-4E8F-9C61-152559854661}</__ValidFrom>
                  <__Source>{1B86697D-60CA-4D80-83FB-7555A2E6CE1C}</__Source>
                  <__Workflow>{A4F985D9-98B3-4B52-AAAF-4344F6E747C6}</__Workflow>
                  <__Updated>{D9CF14B1-FA16-4BA6-9288-E8A174D4D522}</__Updated>
                  <__Created>{25BED78C-4957-4165-998A-CA1B52F67497}</__Created>
                </include>
                <fields hint="raw:AddCustomField">
                  <field luceneName="__smallCreatedDate" storageType="no" indexType="untokenized" format="yyyyMMdd">__created</field>
                  <field luceneName="__smallUpdatedDate" storageType="no" indexType="untokenized" format="yyyyMMdd">__updated</field>
                  <field luceneName="_tags" storageType="no" indexType="tokenized">tags</field>
                </fields>
                <fields hint="raw:RemoveSpecialFields">
                  <remove type="both">Links</remove>
                  <remove type="both">Editor</remove>
                  <remove type="both">Icon</remove>
                  <remove type="both">DisplayName</remove>
                  <remove type="both">AllTemplates</remove>
                  <remove type="both">Hidden</remove>
                  <remove type="both">Created</remove>
                  <remove type="both">Updated</remove>
                </fields>
              </ItemBucketSearch>
            </locations>
          </index>
          <index id="itembuckets_systemfolder" type="Sitecore.Search.Index, Sitecore.Kernel">
            <param desc="name">$(id)</param>
            <param desc="folder">itembuckets_systemfolder</param>
            <Analyzer ref="search/analyzer" />
            <locations hint="list:AddCrawler">
              <ItemBucketSearch type="Sitecore.ItemBucket.Kernel.Crawlers.CustomCrawler,Sitecore.ItemBucket.Kernel">
                <Database>master</Database>
                <Root>/sitecore/system</Root>
                <IndexAllFields>true</IndexAllFields>
                <fieldTypes hint="raw:AddFieldTypes">
                  <fieldType name="multilist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelistex" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="checklist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="tree list" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="rich text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="checkbox" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="file" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="single-Line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="word document" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="multi-line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droplist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="grouped droplink" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="grouped droplist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droplink" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droptree" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="general link" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                </fieldTypes>
                <!--<include hint="list:ExcludeTemplate">
                  <layout>{ADB6CA4F-03EF-4F47-B9AC-9CE2BA53FF97}</layout>
                </include>
                <include hint="list:IncludeTemplate">
                  <layout>{ADB6CA4F-03EF-4F47-B9AC-9CE2BA53FF97}</layout>
                </include>
                <include hint="list:IncludeField">
                  <fieldId>{8CDC337E-A112-42FB-BBB4-4143751E123F}</fieldId>
                </include>-->
                <include hint="list:ExcludeField">
                  <__DefaultWorkflow>{CA9B9F52-4FB0-4F87-A79F-24DEA62CDA65}</__DefaultWorkflow>
                  <__Lock>{001DD393-96C5-490B-924A-B0F25CD9EFD8}</__Lock>
                  <__WorkflowState>{3E431DE1-525E-47A3-B6B0-1CCBEC3A8C98}</__WorkflowState>
                  <__LongDescription>{577F1689-7DE4-4AD2-A15F-7FDC1759285F}</__LongDescription>
                  <__Originator>{F6D8A61C-2F84-4401-BD24-52D2068172BC}</__Originator>
                  <__Owner>{52807595-0F8F-4B20-8D2A-CB71D28C6103}</__Owner>
                  <__ReadOnly>{9C6106EA-7A5A-48E2-8CAD-F0F693B1E2D4}</__ReadOnly>
                  <__Renderings>{F1A1FE9E-A60C-4DDB-A3A0-BB5B29FE732E}</__Renderings>
                  <__Revision>{8CDC337E-A112-42FB-BBB4-4143751E123F}</__Revision>
                  <__Security>{DEC8D2D5-E3CF-48B6-A653-8E69E2716641}</__Security>
                  <__ShortDescription>{9541E67D-CE8C-4225-803D-33F7F29F09EF}</__ShortDescription>
                  <__SortOrder>{BA3F86A2-4A1C-4D78-B63D-91C2779C1B5E}</__SortOrder>
                  <__UpdatedBy>{BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}</__UpdatedBy>
                  <__ValidFrom>{C8F93AFE-BFD4-4E8F-9C61-152559854661}</__ValidFrom>
                  <__Source>{1B86697D-60CA-4D80-83FB-7555A2E6CE1C}</__Source>
                  <__Workflow>{A4F985D9-98B3-4B52-AAAF-4344F6E747C6}</__Workflow>
                  <__Updated>{D9CF14B1-FA16-4BA6-9288-E8A174D4D522}</__Updated>
                  <__Created>{25BED78C-4957-4165-998A-CA1B52F67497}</__Created>
                </include>
                <fields hint="raw:AddCustomField">
                  <field luceneName="__smallCreatedDate" storageType="no" indexType="untokenized" format="yyyyMMdd">__created</field>
                  <field luceneName="__smallUpdatedDate" storageType="no" indexType="untokenized" format="yyyyMMdd">__updated</field>
                  <field luceneName="_tags" storageType="no" indexType="tokenized">tags</field>
                </fields>
                <fields hint="raw:RemoveSpecialFields">
                  <remove type="both">Links</remove>
                  <remove type="both">Editor</remove>
                  <remove type="both">Icon</remove>
                  <remove type="both">DisplayName</remove>
                  <remove type="both">AllTemplates</remove>
                  <remove type="both">Hidden</remove>
                  <remove type="both">Created</remove>
                  <remove type="both">Updated</remove>
                </fields>
              </ItemBucketSearch>
            </locations>
          </index>
          <index id="itembuckets_layoutsfolder" type="Sitecore.Search.Index, Sitecore.Kernel">
            <param desc="name">$(id)</param>
            <param desc="folder">itembuckets_layoutsfolder</param>
            <Analyzer ref="search/analyzer" />
            <locations hint="list:AddCrawler">
              <ItemBucketSearch type="Sitecore.ItemBucket.Kernel.Crawlers.CustomCrawler,Sitecore.ItemBucket.Kernel">
                <Database>master</Database>
                <Root>/sitecore/layout</Root>
                <IndexAllFields>true</IndexAllFields>
                <fieldTypes hint="raw:AddFieldTypes">
                  <fieldType name="multilist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelistex" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="integer" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" padding="8" />
                  <fieldType name="checklist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="tree list" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="rich text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="checkbox" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="file" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="single-Line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="word document" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="multi-line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droplist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="grouped droplink" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="grouped droplist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droplink" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droptree" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="general link" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                </fieldTypes>
                <!--<include hint="list:ExcludeTemplate">
                  <layout>{ADB6CA4F-03EF-4F47-B9AC-9CE2BA53FF97}</layout>
                </include>
                <include hint="list:IncludeTemplate">
                  <layout>{ADB6CA4F-03EF-4F47-B9AC-9CE2BA53FF97}</layout>
                </include>
                <include hint="list:IncludeField">
                  <fieldId>{8CDC337E-A112-42FB-BBB4-4143751E123F}</fieldId>
                </include>-->
                <include hint="list:ExcludeField">
                  <__DefaultWorkflow>{CA9B9F52-4FB0-4F87-A79F-24DEA62CDA65}</__DefaultWorkflow>
                  <__Lock>{001DD393-96C5-490B-924A-B0F25CD9EFD8}</__Lock>
                  <__WorkflowState>{3E431DE1-525E-47A3-B6B0-1CCBEC3A8C98}</__WorkflowState>
                  <__LongDescription>{577F1689-7DE4-4AD2-A15F-7FDC1759285F}</__LongDescription>
                  <__Originator>{F6D8A61C-2F84-4401-BD24-52D2068172BC}</__Originator>
                  <__Owner>{52807595-0F8F-4B20-8D2A-CB71D28C6103}</__Owner>
                  <__ReadOnly>{9C6106EA-7A5A-48E2-8CAD-F0F693B1E2D4}</__ReadOnly>
                  <__Renderings>{F1A1FE9E-A60C-4DDB-A3A0-BB5B29FE732E}</__Renderings>
                  <__Revision>{8CDC337E-A112-42FB-BBB4-4143751E123F}</__Revision>
                  <__Security>{DEC8D2D5-E3CF-48B6-A653-8E69E2716641}</__Security>
                  <__ShortDescription>{9541E67D-CE8C-4225-803D-33F7F29F09EF}</__ShortDescription>
                  <__SortOrder>{BA3F86A2-4A1C-4D78-B63D-91C2779C1B5E}</__SortOrder>
                  <__UpdatedBy>{BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}</__UpdatedBy>
                  <__ValidFrom>{C8F93AFE-BFD4-4E8F-9C61-152559854661}</__ValidFrom>
                  <__Source>{1B86697D-60CA-4D80-83FB-7555A2E6CE1C}</__Source>
                  <__Workflow>{A4F985D9-98B3-4B52-AAAF-4344F6E747C6}</__Workflow>
                  <__Updated>{D9CF14B1-FA16-4BA6-9288-E8A174D4D522}</__Updated>
                  <__Created>{25BED78C-4957-4165-998A-CA1B52F67497}</__Created>
                </include>
                <fields hint="raw:AddCustomField">
                  <field luceneName="__smallCreatedDate" storageType="no" indexType="untokenized" format="yyyyMMdd">__created</field>
                  <field luceneName="__smallUpdatedDate" storageType="no" indexType="untokenized" format="yyyyMMdd">__updated</field>
                  <field luceneName="_tags" storageType="no" indexType="tokenized">tags</field>
                </fields>
                <fields hint="raw:RemoveSpecialFields">
                  <remove type="both">Links</remove>
                  <remove type="both">Editor</remove>
                  <remove type="both">Icon</remove>
                  <remove type="both">DisplayName</remove>
                  <remove type="both">AllTemplates</remove>
                  <remove type="both">Hidden</remove>
                  <remove type="both">Created</remove>
                  <remove type="both">Updated</remove>
                </fields>
              </ItemBucketSearch>
            </locations>
          </index>
          <index id="itembuckets_medialibrary" type="Sitecore.Search.Index, Sitecore.Kernel">
            <param desc="name">$(id)</param>
            <param desc="folder">itembuckets_medialibrary</param>
            <Analyzer ref="search/analyzer" />
            <locations hint="list:AddCrawler">
              <ItemBucketSearch type="Sitecore.ItemBucket.Kernel.Crawlers.CustomCrawler,Sitecore.ItemBucket.Kernel">
                <Database>master</Database>
                <Root>/sitecore/media library</Root>
                <IndexAllFields>true</IndexAllFields>
                <fieldTypes hint="raw:AddFieldTypes">
                  <fieldType name="multilist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelistex" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="checklist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="tree list" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="rich text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="checkbox" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="file" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="single-Line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="word document" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="multi-line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droplist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="grouped droplink" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="grouped droplist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droplink" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droptree" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="general link" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                </fieldTypes>
                <!--<include hint="list:ExcludeTemplate">
                  <layout>{ADB6CA4F-03EF-4F47-B9AC-9CE2BA53FF97}</layout>
                </include>
                <include hint="list:IncludeTemplate">
                  <layout>{ADB6CA4F-03EF-4F47-B9AC-9CE2BA53FF97}</layout>
                </include>-->
                <include hint="list:IncludeField">
                  <fieldId>{65885C44-8FCD-4A7F-94F1-EE63703FE193}</fieldId>
                  <fieldId>{8CF45D0E-ADD4-4772-911A-AC6FC50F9C7D}</fieldId>
                </include>
                <include hint="list:ExcludeField">
                  <__DefaultWorkflow>{CA9B9F52-4FB0-4F87-A79F-24DEA62CDA65}</__DefaultWorkflow>
                  <__Lock>{001DD393-96C5-490B-924A-B0F25CD9EFD8}</__Lock>
                  <__WorkflowState>{3E431DE1-525E-47A3-B6B0-1CCBEC3A8C98}</__WorkflowState>
                  <__LongDescription>{577F1689-7DE4-4AD2-A15F-7FDC1759285F}</__LongDescription>
                  <__Originator>{F6D8A61C-2F84-4401-BD24-52D2068172BC}</__Originator>
                  <__Owner>{52807595-0F8F-4B20-8D2A-CB71D28C6103}</__Owner>
                  <__ReadOnly>{9C6106EA-7A5A-48E2-8CAD-F0F693B1E2D4}</__ReadOnly>
                  <__Renderings>{F1A1FE9E-A60C-4DDB-A3A0-BB5B29FE732E}</__Renderings>
                  <__Revision>{8CDC337E-A112-42FB-BBB4-4143751E123F}</__Revision>
                  <__Security>{DEC8D2D5-E3CF-48B6-A653-8E69E2716641}</__Security>
                  <__ShortDescription>{9541E67D-CE8C-4225-803D-33F7F29F09EF}</__ShortDescription>
                  <__SortOrder>{BA3F86A2-4A1C-4D78-B63D-91C2779C1B5E}</__SortOrder>
                  <__UpdatedBy>{BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}</__UpdatedBy>
                  <__ValidFrom>{C8F93AFE-BFD4-4E8F-9C61-152559854661}</__ValidFrom>
                  <__Source>{1B86697D-60CA-4D80-83FB-7555A2E6CE1C}</__Source>
                  <__Workflow>{A4F985D9-98B3-4B52-AAAF-4344F6E747C6}</__Workflow>
                  <__Updated>{D9CF14B1-FA16-4BA6-9288-E8A174D4D522}</__Updated>
                  <__Created>{25BED78C-4957-4165-998A-CA1B52F67497}</__Created>
                </include>
                <fields hint="raw:AddCustomField">
                  <field luceneName="__smallCreatedDate" storageType="no" indexType="untokenized" format="yyyyMMdd">__created</field>
                  <field luceneName="__smallUpdatedDate" storageType="no" indexType="untokenized" format="yyyyMMdd">__updated</field>
                  <field luceneName="_tags" storageType="no" indexType="tokenized">tags</field>
                </fields>
                <!-- Determines if certain inbuilt Sitecore fields will not be included into the index.
                  Options for type include "template", "both", "item".
                  Available Element Values include:
                  Links|Editor|Icon|Creator|DisplayName|AllTemplates|TemplateName|Hidden|Created|Updated|Path
                  Use: 
                  
                  -->
                <fields hint="raw:RemoveSpecialFields">
                  <remove type="both">Links</remove>
                  <remove type="both">Editor</remove>
                  <remove type="both">Icon</remove>
                  <remove type="both">DisplayName</remove>
                  <remove type="both">AllTemplates</remove>
                  <remove type="both">Hidden</remove>
                  <remove type="both">Created</remove>
                  <remove type="both">Updated</remove>
                </fields>
              </ItemBucketSearch>
            </locations>
          </index>
          <index id="itembuckets_templates" type="Sitecore.Search.Index, Sitecore.Kernel">
            <param desc="name">$(id)</param>
            <param desc="folder">itembuckets_templates</param>
            <Analyzer ref="search/analyzer" />
            <locations hint="list:AddCrawler">
              <ItemBucketSearch type="Sitecore.ItemBucket.Kernel.Crawlers.CustomCrawler,Sitecore.ItemBucket.Kernel">
                <Database>master</Database>
                <Root>/sitecore/templates</Root>
                <IndexAllFields>true</IndexAllFields>
                <fieldTypes hint="raw:AddFieldTypes">
                  <fieldType name="multilist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelistex" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="checklist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="tree list" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="rich text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="checkbox" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="file" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="single-Line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="word document" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="multi-line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droplist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="grouped droplink" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="grouped droplist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droplink" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droptree" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="general link" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                </fieldTypes>
                <!--<include hint="list:ExcludeTemplate">
                  <layout>{ADB6CA4F-03EF-4F47-B9AC-9CE2BA53FF97}</layout>
                </include>
                <include hint="list:IncludeTemplate">
                  <layout>{ADB6CA4F-03EF-4F47-B9AC-9CE2BA53FF97}</layout>
                </include>
                <include hint="list:IncludeField">
                  <fieldId>{8CDC337E-A112-42FB-BBB4-4143751E123F}</fieldId>
                </include>-->
                <include hint="list:ExcludeField">
                  <__DefaultWorkflow>{CA9B9F52-4FB0-4F87-A79F-24DEA62CDA65}</__DefaultWorkflow>
                  <__Lock>{001DD393-96C5-490B-924A-B0F25CD9EFD8}</__Lock>
                  <__WorkflowState>{3E431DE1-525E-47A3-B6B0-1CCBEC3A8C98}</__WorkflowState>
                  <__LongDescription>{577F1689-7DE4-4AD2-A15F-7FDC1759285F}</__LongDescription>
                  <__Originator>{F6D8A61C-2F84-4401-BD24-52D2068172BC}</__Originator>
                  <__Owner>{52807595-0F8F-4B20-8D2A-CB71D28C6103}</__Owner>
                  <__ReadOnly>{9C6106EA-7A5A-48E2-8CAD-F0F693B1E2D4}</__ReadOnly>
                  <__Renderings>{F1A1FE9E-A60C-4DDB-A3A0-BB5B29FE732E}</__Renderings>
                  <__Revision>{8CDC337E-A112-42FB-BBB4-4143751E123F}</__Revision>
                  <__Security>{DEC8D2D5-E3CF-48B6-A653-8E69E2716641}</__Security>
                  <__ShortDescription>{9541E67D-CE8C-4225-803D-33F7F29F09EF}</__ShortDescription>
                  <__SortOrder>{BA3F86A2-4A1C-4D78-B63D-91C2779C1B5E}</__SortOrder>
                  <__UpdatedBy>{BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}</__UpdatedBy>
                  <__ValidFrom>{C8F93AFE-BFD4-4E8F-9C61-152559854661}</__ValidFrom>
                  <__Source>{1B86697D-60CA-4D80-83FB-7555A2E6CE1C}</__Source>
                  <__Workflow>{A4F985D9-98B3-4B52-AAAF-4344F6E747C6}</__Workflow>
                  <__Updated>{D9CF14B1-FA16-4BA6-9288-E8A174D4D522}</__Updated>
                  <__Created>{25BED78C-4957-4165-998A-CA1B52F67497}</__Created>
                </include>
                <fields hint="raw:AddCustomField">
                  <field luceneName="__smallCreatedDate" storageType="no" indexType="untokenized" format="yyyyMMdd">__created</field>
                  <field luceneName="__smallUpdatedDate" storageType="no" indexType="untokenized" format="yyyyMMdd">__updated</field>
                  <field luceneName="_tags" storageType="no" indexType="tokenized">tags</field>
                </fields>
                <fields hint="raw:RemoveSpecialFields">
                  <remove type="both">Links</remove>
                  <remove type="both">Editor</remove>
                  <remove type="both">Icon</remove>
                  <remove type="both">DisplayName</remove>
                  <remove type="both">AllTemplates</remove>
                  <remove type="both">Hidden</remove>
                  <remove type="both">Created</remove>
                  <remove type="both">Updated</remove>
                </fields>
              </ItemBucketSearch>
            </locations>
          </index>
          <index id="itembuckets_sitecore" type="Sitecore.Search.Index, Sitecore.Kernel">
            <param desc="name">$(id)</param>
            <param desc="folder">itembuckets_sitecore</param>
            <Analyzer ref="search/analyzer" />
            <locations hint="list:AddCrawler">
              <ItemBucketSearch type="Sitecore.ItemBucket.Kernel.Crawlers.CustomCrawler,Sitecore.ItemBucket.Kernel">
                <Database>master</Database>
                <Root>/sitecore</Root>
                <IndexAllFields>true</IndexAllFields>
                <fieldTypes hint="raw:AddFieldTypes">
                  <fieldType name="multilist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="treelistex" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="checklist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="tree list" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="rich text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="checkbox" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="file" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="single-Line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="word document" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="multi-line text" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droplist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="grouped droplink" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="grouped droplist" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droplink" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="droptree" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                  <fieldType name="general link" storageType="NO" indexType="TOKENIZED" vectorType="NO" boost="1f" />
                </fieldTypes>
                <include hint="list:ExcludeTemplate">
                  <layout>{ADB6CA4F-03EF-4F47-B9AC-9CE2BA53FF97}</layout>
                </include>
                <!-- <include hint="list:IncludeTemplate">
                  <layout>{ADB6CA4F-03EF-4F47-B9AC-9CE2BA53FF97}</layout>
                </include>
                <include hint="list:IncludeField">
                  <fieldId>{8CDC337E-A112-42FB-BBB4-4143751E123F}</fieldId>
                </include>-->
                <include hint="list:ExcludeField">
                  <__DefaultWorkflow>{CA9B9F52-4FB0-4F87-A79F-24DEA62CDA65}</__DefaultWorkflow>
                  <__Lock>{001DD393-96C5-490B-924A-B0F25CD9EFD8}</__Lock>
                 <!-- <__WorkflowState>{3E431DE1-525E-47A3-B6B0-1CCBEC3A8C98}</__WorkflowState> -->
                  <__LongDescription>{577F1689-7DE4-4AD2-A15F-7FDC1759285F}</__LongDescription>
                  <__Originator>{F6D8A61C-2F84-4401-BD24-52D2068172BC}</__Originator>
                  <__Owner>{52807595-0F8F-4B20-8D2A-CB71D28C6103}</__Owner>
                  <__ReadOnly>{9C6106EA-7A5A-48E2-8CAD-F0F693B1E2D4}</__ReadOnly>
                  <__Renderings>{F1A1FE9E-A60C-4DDB-A3A0-BB5B29FE732E}</__Renderings>
                  <__Revision>{8CDC337E-A112-42FB-BBB4-4143751E123F}</__Revision>
                  <__Security>{DEC8D2D5-E3CF-48B6-A653-8E69E2716641}</__Security>
                  <__ShortDescription>{9541E67D-CE8C-4225-803D-33F7F29F09EF}</__ShortDescription>
                  <__SortOrder>{BA3F86A2-4A1C-4D78-B63D-91C2779C1B5E}</__SortOrder>
                  <__UpdatedBy>{BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}</__UpdatedBy>
                  <__ValidFrom>{C8F93AFE-BFD4-4E8F-9C61-152559854661}</__ValidFrom>
                  <__Source>{1B86697D-60CA-4D80-83FB-7555A2E6CE1C}</__Source>
                  <__Workflow>{A4F985D9-98B3-4B52-AAAF-4344F6E747C6}</__Workflow>
                  <__Updated>{D9CF14B1-FA16-4BA6-9288-E8A174D4D522}</__Updated>
                  <__Created>{25BED78C-4957-4165-998A-CA1B52F67497}</__Created>
                </include>
                <fields hint="raw:AddCustomField">
                  <field luceneName="__smallCreatedDate" storageType="no" indexType="untokenized" format="yyyyMMdd">__created</field>
                  <field luceneName="__smallUpdatedDate" storageType="no" indexType="untokenized" format="yyyyMMdd">__updated</field>
                  <field luceneName="_tags" storageType="no" indexType="tokenized">tags</field>
                </fields>
                <fields hint="raw:RemoveSpecialFields">
                  <remove type="both">Links</remove>
                  <remove type="both">Editor</remove>
                  <remove type="both">Icon</remove>
                  <remove type="both">DisplayName</remove>
                  <remove type="both">AllTemplates</remove>
                  <remove type="both">Hidden</remove>
                  <remove type="both">Created</remove>
                  <remove type="both">Updated</remove>
                </fields>
              </ItemBucketSearch>
            </locations>
          </index>
        </indexes>
      </configuration>
    </search>
    <databases>
      <database id="master" singleInstance="true" type="Sitecore.Data.Database, Sitecore.Kernel">
        <Engines.DataEngine.Commands.AddFromTemplatePrototype>
          <obj type="Sitecore.ItemBucket.Kernel.Commands.AddFromTemplateCommand, Sitecore.ItemBucket.Kernel" />
        </Engines.DataEngine.Commands.AddFromTemplatePrototype>
      </database>
    </databases>
    <events>
      <!-- Enable these events if you want Sitecore to automatically create buckets when item numbers get too large at one sibling level -->
      <!-- <event name="item:added">
        <handler type="Sitecore.ItemBucket.Kernel.Events.AutoBucket, Sitecore.ItemBucket.Kernel" method="Execute"/>
      </event>
     <event name="item:copying">
        <handler type="Sitecore.ItemBucket.Kernel.Events.AutoBucket, Sitecore.ItemBucket.Kernel" method="Execute"/>
      </event>
      <event name="item:moved">
        <handler type="Sitecore.ItemBucket.Kernel.Events.AutoBucket, Sitecore.ItemBucket.Kernel" method="Execute"/>
      </event>-->
      <event name="item:copied:remote"/>
      <event name="item:moved:remote"/>
      <event name="item:templateChanged"/>
      <event name="item:bucketing:cloning"/>
      <event name="item:bucketing:cloned"/>
      <event name="item:bucketing:copying"/>
      <event name="item:bucketing:duplicating"/>
      <event name="item:bucketing:duplicated"/>
      <event name="item:bucketing:copied"/>
      <event name="item:bucketing:moving"/>
      <event name="item:bucketing:moved"/>
      <event name="item:bucketing:starting"/>
      <event name="item:bucketing:ending"/>
      <event name="item:unbucketing:starting"/>
      <event name="item:unbucketing:ending"/>
      <event name="item:moved:remote"/>
      <event name="item:templateChanged"/>
      <event name="item:versionAdding">
        <handler type="Sitecore.ItemBucket.Kernel.Events.AddingVersions, Sitecore.ItemBucket.Kernel" method="Execute"/>
      </event>
      <!-- <event name="item:versionAdded">
        <handler type="Sitecore.ItemBucket.Kernel.Events.AddedVersion, Sitecore.ItemBucket.Kernel" method="Execute"/>
      </event> -->
    </events>
    <!-- Scalable Link Database that does not load all references into memory. -->
    <LinkDatabase patch:instead="*[@type='Sitecore.Data.$(database).$(database)LinkDatabase, Sitecore.Kernel']" type="Sitecore.ItemBucket.Kernel.Kernel.Data.ScalableLinkDatabase, Sitecore.ItemBucket.Kernel">
      <param connectionStringName="core"/>
    </LinkDatabase>
    <authorization>
      <patch:attribute name="defaultProvider">custom</patch:attribute>
      <providers>
        <clear />
        <add name="custom" type="Sitecore.ItemBucket.Kernel.Security.BucketAuthorizationProvider, Sitecore.ItemBucket.Kernel" connectionStringName="core" embedAclInItems="true" />
      </providers>
    </authorization>
    <!-- Adds the ability to give users/roles the ability to create or unbucket a bucket. -->
    <accessRights>
      <rights>
        <add name="bucket:makebucket" comment="Make Bucket" title="Make Bucket" type="Sitecore.ItemBucket.Kernel.Security.BucketAccessRight, Sitecore.ItemBucket.Kernel" />
        <add name="bucket:unmake" comment="UnMake Bucket" title="UnMake Bucket" type="Sitecore.ItemBucket.Kernel.Security.BucketAccessRight, Sitecore.ItemBucket.Kernel" />
      </rights>
      <rules>
        <add patch:before="*[1]" ancestor="{0DE95AE4-41AB-4D01-9EB0-67441B7C2450}" comment="/sitecore/content" />
      </rules>
    </accessRights>
    <!-- This will run warmup queries for you index. Extend this class or add another Hook if you want to add your own queries. -->
    <hooks>
      <hook type="Sitecore.ItemBucket.Kernel.Kernel.Hooks.QueryWarmUp, Sitecore.ItemBucket.Kernel"/>
    </hooks>
    <commands>
      <command name="contenteditor:togglebucketitems" type="Sitecore.ItemBucket.Kernel.Commands.ToggleBucket,Sitecore.ItemBucket.Kernel"/>
      <command name="item:bucket" type="Sitecore.ItemBucket.Kernel.Commands.MakeBucket,Sitecore.ItemBucket.Kernel" />
      <command name="item:syncbucket" type="Sitecore.ItemBucket.Kernel.Commands.SyncBucket,Sitecore.ItemBucket.Kernel" />
      <command name="item:unbucket" type="Sitecore.ItemBucket.Kernel.Commands.UnMakeBucket,Sitecore.ItemBucket.Kernel" />
      <command name="item:bucketSearch" type="Sitecore.ItemBucket.Kernel.Commands.Search,Sitecore.ItemBucket.Kernel"/>
      <command name="contenteditor:launchtab" type="Sitecore.ItemBucket.Kernel.Commands.AddTab,Sitecore.ItemBucket.Kernel"/>
      <command name="contenteditor:launchblanktab" type="Sitecore.ItemBucket.Kernel.Commands.AddBlankSearch,Sitecore.ItemBucket.Kernel"/>
      <command name="contenteditor:launchsilenttab" type="Sitecore.ItemBucket.Kernel.Commands.AddSilentTab,Sitecore.ItemBucket.Kernel"/>
      <command name="template:setbucketable" type="Sitecore.ItemBucket.Kernel.Commands.MarkAsBucketable,Sitecore.ItemBucket.Kernel"/>
      <command name="template:unsetbucketable" type="Sitecore.ItemBucket.Kernel.Commands.MarkAsUnBucketable,Sitecore.ItemBucket.Kernel"/>
      <command name="field:setsearchimagefield" type="Sitecore.ItemBucket.Kernel.Commands.MarkImageFieldAsSearchResultsImage,Sitecore.ItemBucket.Kernel"/>
      <command name="field:setastag" type="Sitecore.ItemBucket.Kernel.Commands.SetFieldAsTag,Sitecore.ItemBucket.Kernel"/>
      <command name="security:setsecurityrule" type="Sitecore.ItemBucket.Kernel.Commands.SetSecurityRule,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:optimise" type="Sitecore.ItemBucket.Kernel.Commands.Optimise,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:usage" type="Sitecore.ItemBucket.Kernel.Commands.BucketUsage,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:rebuild" type="Sitecore.ItemBucket.Kernel.Commands.Rebuild,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:CopyResultstoIDList" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.CopyToIDList,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:CopytoDatasourceQuery" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.CopyToDatasourceQuery,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:CopyResultsTo" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.CopyToCommand,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:MoveResultsTo" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.MoveToCommand,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:CloneResultsTo" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.CloneToCommand,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:DeleteResults" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.DeleteCommand,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:ApplyPresentationToAllItems" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.ApplyPresentationToItems,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:AddTag" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.AddTag,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:ApplyCampaignsGoalsEventsToAllItems" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.ApplyCampaignsGoalsEventsToAllItems,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:ApplyProfileScoreToAllItems" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.ApplyProfileCardsToAllItems,Sitecore.ItemBucket.Kernel"/>
      <command name="item:gobacktoclosestparentbucket" type="Sitecore.ItemBucket.Kernel.Commands.GoToClosestBucketParent,Sitecore.ItemBucket.Kernel"/>
      <command name="item:pasteIdList" type="Sitecore.ItemBucket.Kernel.Kernel.Commands.PasteToField,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:RunConditionalRule" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.RunConditionalRule,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:ChangeTemplateForAllItems" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.ChangeTemplateForAllItems,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:ApplyFieldValueChangeToAllItems" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.ApplyFieldValueChangeToAllItems,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:delete" type="Sitecore.ItemBucket.Kernel.Kernel.Forms.BucketLinkForm.RollbackDelete,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:empty" type="Sitecore.ItemBucket.Kernel.Kernel.Forms.BucketLinkForm.RollbackEmpty,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:refresh" type="Sitecore.ItemBucket.Kernel.Kernel.Forms.BucketLinkForm.RollbackRefresh,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:restore" type="Sitecore.ItemBucket.Kernel.Kernel.Forms.BucketLinkForm.RollbackRestore,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:SerialiseItems" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.SerialiseItems,Sitecore.ItemBucket.Kernel"/>
      <command name="webedit:search" type="Sitecore.ItemBucket.Kernel.Kernel.Forms.WebEdit.Search,Sitecore.ItemBucket.Kernel"/>
      <command name="solr:generate" type="Sitecore.ItemBucket.Kernel.Commands.SOLRGenerateForm,Sitecore.ItemBucket.Kernel"/>
      <command name="bucket:PublishItems" type="Sitecore.ItemBucket.Kernel.Kernel.Search.SearchOperations.PublishItems,Sitecore.ItemBucket.Kernel"/>
      <command name="content:fullscreen" type="Sitecore.ItemBucket.Kernel.Kernel.Commands.FullScreen,Sitecore.ItemBucket.Kernel"/>
      <command name="content:selectintree" type="Sitecore.ItemBucket.Kernel.Kernel.Commands.SelectInTree,Sitecore.ItemBucket.Kernel"/>
    </commands>
    <pipelines>
      <!-- This allows the custom Template Field sources to be resolved. -->
      <getLookupSourceItems>
        <processor patch:before="*[@type='Sitecore.Pipelines.GetLookupSourceItems.ProcessQuerySource, Sitecore.Kernel']" type="Sitecore.ItemBucket.Kernel.FieldTypes.CustomDataSource, Sitecore.ItemBucket.Kernel"/>
        <processor patch:before="*[@type='Sitecore.Pipelines.GetLookupSourceItems.ProcessQuerySource, Sitecore.Kernel']" type="Sitecore.ItemBucket.Kernel.FieldTypes.LuceneQuery, Sitecore.ItemBucket.Kernel"/>
      </getLookupSourceItems>
      <httpRequestBegin>
        <processor patch:after="*[@type='Sitecore.Pipelines.HttpRequest.ItemResolver, Sitecore.Kernel']" type="Sitecore.ItemBucket.Kernel.Common.Providers.NewsLinkResolver, Sitecore.ItemBucket.Kernel"/>
      </httpRequestBegin>
 <!--Put this on only if you are running a .net 4.0 Application Pool. It will utilise all your processors and cores to publish the content.-->
 <!--<publish help="Processors should derive from Sitecore.Publishing.Pipelines.Publish.PublishProcessor">
        <processor patch:instead="*[3]"  type="Sitecore.ItemBucket.Kernel.Publishing.ProcessQueue, Sitecore.ItemBucket.Kernel"/>
      </publish>-->
    </pipelines>
    <processors>
      <!-- Pipeline for when a Bucket is created through the UI. -->
      <uiBucketItems>
        <processor mode="on" type="Sitecore.ItemBucket.Kernel.Pipelines.Bucket.CreateBucketProcessor, Sitecore.ItemBucket.Kernel"  method="CreateBucket"/>
      </uiBucketItems>
      <!-- Pipeline for when a Bucket is unbucketed through the UI. -->
      <uiUnBucketItems>
        <processor mode="on" type="Sitecore.ItemBucket.Kernel.Pipelines.UnBucket.UnbucketProcessor, Sitecore.ItemBucket.Kernel"  method="Unbucket"/>
      </uiUnBucketItems>
      <uiCloneItems>
        <processor mode="on" patch:before="*[@method='Execute']" type="Sitecore.ItemBucket.Kernel.Pipelines.BucketItemClone, Sitecore.ItemBucket.Kernel"  method="Execute"/>
      </uiCloneItems>
      <uiDragItemTo>
        <processor mode="on" patch:before="*[@method='Execute']" type="Sitecore.ItemBucket.Kernel.Kernel.Pipelines.ItemDrag, Sitecore.ItemBucket.Kernel" method="Execute"/>
      </uiDragItemTo>
      <uiCopyItems>
        <processor mode="on" patch:before="*[@method='Execute']" type="Sitecore.ItemBucket.Kernel.Pipelines.ItemCopy, Sitecore.ItemBucket.Kernel" method="Execute"/>
      </uiCopyItems>
      <uiMoveItems>
        <processor mode="on" patch:before="*[@method='Execute']" type="Sitecore.ItemBucket.Kernel.Pipelines.ItemMove, Sitecore.ItemBucket.Kernel" method="Execute"/>
      </uiMoveItems>
      <uiDuplicateItem>
        <processor mode="on" patch:before="*[@method='Execute']" type="Sitecore.ItemBucket.Kernel.Pipelines.ItemDuplicate, Sitecore.ItemBucket.Kernel" method="Execute"/>
      </uiDuplicateItem>
      <uiUpload>
      </uiUpload>
      <uiDeleteItems>
        <processor mode="on" patch:before="*[@method='Confirm']" type="Sitecore.ItemBucket.Kernel.Pipelines.ItemDeleted, Sitecore.ItemBucket.Kernel"  method="Execute"/>
      </uiDeleteItems>
    </processors>

    <!-- Enable to use the default buckets Link Provider
            
            Example: /sitecore/content/Home/Product/2011/11/11/11/11/ItemName
            Output: http://<sitename>/Product/ItemName-201111111111
    -->
    <linkManager>
      <patch:attribute name="defaultProvider">buckets</patch:attribute>
      <providers>
        <clear />
        <add name="buckets" type="Sitecore.ItemBucket.Kernel.Common.Providers.NewsLinkProvider, Sitecore.ItemBucket.Kernel" addAspxExtension="false" alwaysIncludeServerUrl="false" encodeNames="true" languageEmbedding="never" languageLocation="filePath" shortenUrls="true" useDisplayName="false" />
      </providers>
    </linkManager>
    <controlSources>
      <source mode="on" namespace="Sitecore.ItemBucket.Kernel.FieldTypes" assembly="Sitecore.ItemBucket.Kernel" prefix="contentExtension"/>
    </controlSources>
    <settings>
      <!-- If you enable the AutoBucket events above, the following number will be the child number trigger for when there are X many items, it will 
      automatically bucket the parent.
      -->
      <setting name="BucketTriggerCount" value="100"/>

      <!-- Boolean Max Clause Count. Increasing this will increase memory consumption. Only increase if you need to run very large queries.
      -->
      <setting name="LuceneQueryClauseCount" value="1024"/>

      <!-- This is the ID of the auto structuring bucket folder. If you introduce your own, make sure to change the ID below.
      -->
      <setting name="BucketTemplateId" value="{ADB6CA4F-03EF-4F47-B9AC-9CE2BA53FF97}" />
      
      <!-- This filters the domains that the author search will use
      -->
      <setting name="AuthorFacetDomains" value="sitecore|default|ad"/>
      <!-- This setting determines what happens to results that are returned and the user does not have access to
      Options include "hide" or "blur"
      -->
      <setting name="SecuredItems" value="blur"/>

      <!-- This is the structure of the auto organisation of the folders when an Item is created in a bucket.
      -->
      <setting name="BucketFolderPath" value="yyyy/MM/dd/HH/mm"/>
      
      <!-- This will include or exclude the context item in the search results.
      -->
      <setting name="ExcludeContextItemFromResult" value="true"/>

      <!-- If enabled, all queries will be written to the log file. Only have this on while you are debugging, switch off for production.
      -->
      <setting name="EnableBucketDebug" value="true"/>

      <!-- This will globally disable tips for every user. If you would like to disable at a user level, do this within the User Manager.
      -->
      <setting name="EnableSearchTips" value="true"/>
      
      <!-- These words will be ignored when you are search using the Bucket API or through the UI
      -->
      <setting name="stopwords">"a","an","and","are","as","at","be","but","by","for","if","in","into","is","it","no","not","of","on","or","such","that","the","their","then","there","these","they","this","to","was","will","with"</setting>
    </settings>
  </sitecore>
</configuration>


